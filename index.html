<div id="flipbook"></div>

<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/turn.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script>
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

const url = 'pdf/mon-document.pdf';
const flipbook = $("#flipbook");
let pagesData = [];

pdfjsLib.getDocument(url).promise.then(pdf => {
    let loadedPages = 0;

    for(let i=1; i<=pdf.numPages; i++){
        pdf.getPage(i).then(page => {
            const viewport = page.getViewport({ scale: 2 });
            const canvas = document.createElement("canvas");
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            const ctx = canvas.getContext("2d");

            page.render({canvasContext: ctx, viewport: viewport}).promise.then(()=>{
                const div = $('<div class="page"></div>').append(canvas);
                pagesData[i-1] = div;
                loadedPages++;

                if(loadedPages === pdf.numPages){
                    pagesData.forEach(p=>flipbook.append(p));

                    flipbook.turn({
                        width: viewport.width,
                        height: viewport.height,
                        autoCenter: true,
                        duration: 1000
                    });
                }
            });
        });
    }
});
</script>
